# üéõÔ∏è Panel de Administraci√≥n - Documentaci√≥n Completa

## üìã Descripci√≥n General

Panel de administraci√≥n simplificado pero funcional para gesti√≥n completa del e-commerce. Incluye dashboard principal, gesti√≥n de productos, usuarios, √≥rdenes y rese√±as con m√©tricas en tiempo real.

---

## üîó **Endpoints del Panel de Administraci√≥n**

### üè† **DASHBOARD PRINCIPAL**

#### `GET /admin/dashboard`
Dashboard principal con m√©tricas clave
```bash
curl -X GET "https://9dbdcf7272a6.ngrok-free.app/admin/dashboard" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN"
```

**Respuesta esperada:**
```json
{
  "metrics": {
    "users": { "total": 1250 },
    "products": { "total": 89, "lowStock": 12 },
    "orders": { "total": 456, "today": 23, "pending": 8 },
    "revenue": { "total": 125780.50 },
    "reviews": { "pending": 5 }
  },
  "alerts": [
    "12 productos con stock bajo",
    "8 √≥rdenes pendientes",
    "5 rese√±as por moderar"
  ]
}
```

#### `GET /admin/stats/quick`
Estad√≠sticas r√°pidas del sistema
```bash
curl -X GET "https://9dbdcf7272a6.ngrok-free.app/admin/stats/quick" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN"
```

---

### üì¶ **GESTI√ìN DE PRODUCTOS**

#### `GET /admin/products`
Lista de productos con filtros
```bash
curl -X GET "https://9dbdcf7272a6.ngrok-free.app/admin/products?category=zapatillas&limit=20&offset=0" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN"
```

#### `GET /admin/products/low-stock`
Productos con stock bajo (‚â§10 unidades)
```bash
curl -X GET "https://9dbdcf7272a6.ngrok-free.app/admin/products/low-stock" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN"
```

#### `PUT /admin/products/:productId/stock`
Actualizar stock de producto
```bash
curl -X PUT "https://9dbdcf7272a6.ngrok-free.app/admin/products/PRODUCT_ID/stock" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"stock": 50}'
```

#### `PUT /admin/products/:productId/toggle-featured`
Destacar/quitar destacado de producto
```bash
curl -X PUT "https://9dbdcf7272a6.ngrok-free.app/admin/products/PRODUCT_ID/toggle-featured" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN"
```

---

### üë• **GESTI√ìN DE USUARIOS**

#### `GET /admin/users`
Lista de usuarios con filtros
```bash
curl -X GET "https://9dbdcf7272a6.ngrok-free.app/admin/users?role=user&limit=20&search=juan" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN"
```

#### `GET /admin/users/:userId/orders`
Historial de √≥rdenes de un usuario espec√≠fico
```bash
curl -X GET "https://9dbdcf7272a6.ngrok-free.app/admin/users/USER_ID/orders" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN"
```

**Respuesta esperada:**
```json
{
  "orders": [
    {
      "_id": "order_id",
      "total": 1299.99,
      "status": "paid",
      "createdAt": "2025-09-21T10:30:00Z",
      "items": [...]
    }
  ],
  "summary": {
    "totalOrders": 15,
    "totalSpent": 18750.50
  }
}
```

---

### üõçÔ∏è **GESTI√ìN DE √ìRDENES**

#### `GET /admin/orders`
Lista de √≥rdenes con filtros
```bash
curl -X GET "https://9dbdcf7272a6.ngrok-free.app/admin/orders?status=pending&limit=20" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN"
```

#### `PUT /admin/orders/:orderId/status`
Actualizar estado de orden
```bash
curl -X PUT "https://9dbdcf7272a6.ngrok-free.app/admin/orders/ORDER_ID/status" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"status": "shipped"}'
```

**Estados v√°lidos:**
- `pending` - Pendiente
- `paid` - Pagada
- `shipped` - Enviada
- `delivered` - Entregada
- `cancelled` - Cancelada

---

### ‚≠ê **GESTI√ìN DE RESE√ëAS**

#### `GET /admin/reviews/pending`
Rese√±as pendientes de moderaci√≥n
```bash
curl -X GET "https://9dbdcf7272a6.ngrok-free.app/admin/reviews/pending" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN"
```

#### `PUT /admin/reviews/:reviewId/moderate`
Moderar rese√±a (aprobar/rechazar)
```bash
curl -X PUT "https://9dbdcf7272a6.ngrok-free.app/admin/reviews/REVIEW_ID/moderate" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "status": "approved",
    "reason": "Rese√±a v√°lida y constructiva"
  }'
```

**Estados de moderaci√≥n:**
- `approved` - Aprobada
- `rejected` - Rechazada
- `flagged` - Marcada para revisi√≥n

---

## üéØ **Funcionalidades Implementadas**

### üìä **Dashboard Principal**
- ‚úÖ **M√©tricas en Tiempo Real**: Usuarios, productos, √≥rdenes, ingresos
- ‚úÖ **Alertas Autom√°ticas**: Stock bajo, √≥rdenes pendientes, rese√±as por moderar
- ‚úÖ **Estad√≠sticas R√°pidas**: KPIs principales del negocio

### üì¶ **Gesti√≥n de Productos**
- ‚úÖ **Lista Completa**: Con filtros por categor√≠a y b√∫squeda
- ‚úÖ **Control de Stock**: Actualizaci√≥n r√°pida de inventario
- ‚úÖ **Productos Destacados**: Toggle de featured products
- ‚úÖ **Alertas de Stock**: Identificaci√≥n autom√°tica de productos con stock bajo

### üë• **Gesti√≥n de Usuarios**
- ‚úÖ **Lista de Usuarios**: Con filtros por rol y b√∫squeda
- ‚úÖ **Historial de Compras**: Ver todas las √≥rdenes de un usuario
- ‚úÖ **Estad√≠sticas de Cliente**: Total gastado, n√∫mero de √≥rdenes
- ‚úÖ **Informaci√≥n Segura**: Passwords nunca expuestos

### üõçÔ∏è **Gesti√≥n de √ìrdenes**
- ‚úÖ **Dashboard de √ìrdenes**: Lista con filtros por estado y fecha
- ‚úÖ **Cambio de Estados**: Actualizaci√≥n r√°pida de status
- ‚úÖ **Informaci√≥n Completa**: Cliente, productos, totales
- ‚úÖ **Validaci√≥n de Estados**: Solo transiciones v√°lidas permitidas

### ‚≠ê **Gesti√≥n de Rese√±as**
- ‚úÖ **Cola de Moderaci√≥n**: Rese√±as pendientes de aprobaci√≥n
- ‚úÖ **Moderaci√≥n R√°pida**: Aprobar/rechazar con un clic
- ‚úÖ **Informaci√≥n Completa**: Usuario, producto, contenido
- ‚úÖ **Razones de Moderaci√≥n**: Tracking de decisiones

---

## üöÄ **Flujos de Uso del Panel**

### 1. **Flujo de Revisi√≥n Matutina**
```bash
# 1. Ver dashboard principal
curl -X GET "https://9dbdcf7272a6.ngrok-free.app/admin/dashboard" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN"

# 2. Revisar productos con stock bajo
curl -X GET "https://9dbdcf7272a6.ngrok-free.app/admin/products/low-stock" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN"

# 3. Revisar √≥rdenes pendientes
curl -X GET "https://9dbdcf7272a6.ngrok-free.app/admin/orders?status=pending" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN"

# 4. Moderar rese√±as pendientes
curl -X GET "https://9dbdcf7272a6.ngrok-free.app/admin/reviews/pending" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN"
```

### 2. **Flujo de Gesti√≥n de Inventario**
```bash
# 1. Ver productos con stock bajo
curl -X GET "https://9dbdcf7272a6.ngrok-free.app/admin/products/low-stock" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN"

# 2. Actualizar stock de producto espec√≠fico
curl -X PUT "https://9dbdcf7272a6.ngrok-free.app/admin/products/PRODUCT_ID/stock" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"stock": 100}'

# 3. Destacar producto si es necesario
curl -X PUT "https://9dbdcf7272a6.ngrok-free.app/admin/products/PRODUCT_ID/toggle-featured" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN"
```

### 3. **Flujo de Procesamiento de √ìrdenes**
```bash
# 1. Ver √≥rdenes pendientes
curl -X GET "https://9dbdcf7272a6.ngrok-free.app/admin/orders?status=pending" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN"

# 2. Cambiar estado a pagada
curl -X PUT "https://9dbdcf7272a6.ngrok-free.app/admin/orders/ORDER_ID/status" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"status": "paid"}'

# 3. Cambiar estado a enviada
curl -X PUT "https://9dbdcf7272a6.ngrok-free.app/admin/orders/ORDER_ID/status" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"status": "shipped"}'
```

### 4. **Flujo de Moderaci√≥n de Rese√±as**
```bash
# 1. Ver rese√±as pendientes
curl -X GET "https://9dbdcf7272a6.ngrok-free.app/admin/reviews/pending" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN"

# 2. Aprobar rese√±a
curl -X PUT "https://9dbdcf7272a6.ngrok-free.app/admin/reviews/REVIEW_ID/moderate" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "status": "approved",
    "reason": "Rese√±a v√°lida y √∫til"
  }'

# 3. Rechazar rese√±a con motivo
curl -X PUT "https://9dbdcf7272a6.ngrok-free.app/admin/reviews/REVIEW_ID/moderate" \
  -H "Authorization: Bearer ADMIN_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "status": "rejected",
    "reason": "Contenido inapropiado"
  }'
```

---

## üìä **M√©tricas y KPIs Disponibles**

### üéØ **M√©tricas Principales**
- **Usuarios Totales**: Cantidad total de usuarios registrados
- **Productos Totales**: Inventario completo con alertas de stock
- **√ìrdenes**: Total, de hoy, pendientes de procesamiento
- **Ingresos**: Revenue total acumulado
- **Rese√±as**: Pendientes de moderaci√≥n

### üö® **Sistema de Alertas**
- **Stock Bajo**: Productos con ‚â§10 unidades
- **√ìrdenes Pendientes**: √ìrdenes que requieren atenci√≥n
- **Rese√±as por Moderar**: Cola de moderaci√≥n activa

### üìà **Analytics B√°sicos**
- **Promedio de Calificaci√≥n**: Rating general de todos los productos
- **Valor Promedio de Orden**: AOV del negocio
- **Clientes Top**: Usuarios con m√°s compras

---

## üîß **Par√°metros de Consulta**

### üì¶ **Productos**
- `category` - Filtrar por categor√≠a
- `search` - B√∫squeda por nombre
- `limit` - L√≠mite de resultados (m√°x: 100)
- `offset` - Offset para paginaci√≥n

### üë• **Usuarios**
- `role` - Filtrar por rol (user/admin)
- `search` - B√∫squeda por nombre o email
- `limit` - L√≠mite de resultados (m√°x: 100)
- `offset` - Offset para paginaci√≥n

### üõçÔ∏è **√ìrdenes**
- `status` - Filtrar por estado
- `dateFrom` - Fecha desde (YYYY-MM-DD)
- `limit` - L√≠mite de resultados (m√°x: 100)
- `offset` - Offset para paginaci√≥n

---

## üéØ **Casos de Uso Principales**

### üåÖ **Revisi√≥n Matutina del Negocio**
1. **Dashboard**: Ver m√©tricas del d√≠a anterior
2. **Alertas**: Revisar productos con stock bajo
3. **√ìrdenes**: Procesar √≥rdenes pendientes
4. **Rese√±as**: Moderar rese√±as nuevas

### üìä **Gesti√≥n de Inventario**
1. **Stock Bajo**: Identificar productos que necesitan reposici√≥n
2. **Actualizaci√≥n**: Modificar stock r√°pidamente
3. **Featured**: Destacar productos estrat√©gicos
4. **Monitoreo**: Seguimiento continuo de niveles

### üõí **Procesamiento de √ìrdenes**
1. **Cola de √ìrdenes**: Ver √≥rdenes por estado
2. **Informaci√≥n del Cliente**: Historial y datos de contacto
3. **Cambio de Estado**: Mover √≥rdenes por el pipeline
4. **Seguimiento**: Monitorear progreso de env√≠os

### ‚≠ê **Control de Calidad**
1. **Moderaci√≥n**: Revisar rese√±as nuevas
2. **Aprobaci√≥n**: Aprobar contenido de calidad
3. **Rechazo**: Filtrar spam o contenido inapropiado
4. **Seguimiento**: Mantener calidad del contenido

---

## üîê **Seguridad y Permisos**

### üõ°Ô∏è **Control de Acceso**
- ‚úÖ **Solo Administradores**: Todos los endpoints requieren rol 'admin'
- ‚úÖ **JWT Obligatorio**: Autenticaci√≥n requerida en todos los endpoints
- ‚úÖ **Passwords Protegidos**: Nunca se exponen en las respuestas
- ‚úÖ **Validaci√≥n de Estados**: Solo transiciones v√°lidas permitidas

### üìã **Validaciones Implementadas**
- ‚úÖ **L√≠mites de Paginaci√≥n**: M√°ximo 100 resultados por consulta
- ‚úÖ **Validaci√≥n de IDs**: MongoDB ObjectIds v√°lidos
- ‚úÖ **Estados V√°lidos**: Solo estados permitidos en transiciones
- ‚úÖ **Datos Requeridos**: Validaci√≥n de campos obligatorios

---

## üöÄ **Beneficios del Panel**

### ‚ö° **Eficiencia Operativa**
- **Gesti√≥n Centralizada**: Todo desde un solo lugar
- **Alertas Proactivas**: Identificaci√≥n temprana de problemas
- **Acciones R√°pidas**: Updates con un solo clic
- **Informaci√≥n Consolidada**: Vista 360¬∞ del negocio

### üìà **Toma de Decisiones**
- **M√©tricas en Tiempo Real**: Datos actualizados al instante
- **Tendencias Claras**: Identificaci√≥n de patrones
- **Problemas Visibles**: Alertas autom√°ticas
- **Historial Completo**: Tracking de todas las acciones

### üéØ **Control de Calidad**
- **Moderaci√≥n Eficiente**: Cola organizada de rese√±as
- **Stock Controlado**: Nunca quedarse sin inventario
- **√ìrdenes Procesadas**: Pipeline claro de fulfillment
- **Clientes Satisfechos**: Respuesta r√°pida a necesidades

---

## üì± **Pr√≥ximas Mejoras Sugeridas**

### üé® **UI/UX**
- Dashboard visual con gr√°ficos
- Notificaciones en tiempo real
- Acciones en lote (bulk operations)
- Filtros avanzados con autocompletado

### üìä **Analytics Avanzados**
- Reportes de ventas por per√≠odo
- An√°lisis de tendencias
- Segmentaci√≥n de clientes
- Forecasting de demanda

### üîî **Automatizaci√≥n**
- Alertas por email/SMS
- Reposici√≥n autom√°tica de stock
- Moderaci√≥n autom√°tica mejorada
- Reportes programados

---

## ‚úÖ **Panel de Administraci√≥n Funcional**

### üéâ **Caracter√≠sticas Implementadas**
- ‚úÖ **15+ Endpoints** administrativos funcionales
- ‚úÖ **Dashboard Principal** con m√©tricas clave
- ‚úÖ **Gesti√≥n Completa** de productos, usuarios, √≥rdenes
- ‚úÖ **Sistema de Alertas** autom√°tico
- ‚úÖ **Moderaci√≥n de Rese√±as** integrada
- ‚úÖ **Seguridad Robusta** con validaciones
- ‚úÖ **Performance Optimizada** con paginaci√≥n

### üöÄ **Listo para Uso Inmediato**
- ‚úÖ **Compilaci√≥n Exitosa** sin errores
- ‚úÖ **Integraci√≥n Total** con todos los m√≥dulos existentes
- ‚úÖ **Documentaci√≥n Completa** con ejemplos de uso
- ‚úÖ **Endpoints Probados** y validados

**¬°El panel de administraci√≥n est√° listo para gestionar tu e-commerce de manera profesional!** üéõÔ∏è

Con este panel tienes control total sobre:
- üì¶ **Inventario y productos**
- üë• **Base de clientes**
- üõçÔ∏è **√ìrdenes y ventas**
- ‚≠ê **Calidad del contenido**
- üìä **M√©tricas del negocio**
